<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    hello word
    <form action="/sql" method="get" id="form">
        <label for="query">query SQL:</label>
        <input type="text" id="query" name="query" required>

        <input type="submit" value="Enviar">
    </form>
    <p id="data"></p>
    <script>
            document.getElementById('form').addEventListener('submit', function(event) {
                event.preventDefault(); 
                console.log("rw")

                async function create(){

                let objt = {
                    query : document.getElementById("query").value
                }

                let postMetodo = {
                    method: 'POST',
                    headers:{
                        'Content-Type': 'application/json'
                    },
                    body:JSON.stringify(objt)
                }

                const endpoint = '<%= baseURL %>/sql'
                const resposta = await fetch(endpoint, postMetodo)
                console.log(resposta)
                document.getElementById("data").innerHTML = resposta
                }
                create()
            });
                
                /* 
                const formData = {
                    querry: document.getElementById("querry").value
                };

                fetch('<%= baseURL %>/sql', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                })
                .then(response => {
                    if (response.ok) {
                        document.getElementById("data").innerHTML = response.json.stringify;
                        return response.json();
                    }
                    throw new Error('Erro na requisição: ' + response.status);
                })
                .then(data => {
                    console.log('Sucesso:', data);
                    alert('Formulário enviado com sucesso!');
                })
                .catch((error) => {
                    console.error('Erro:', error);
                    alert('Ocorreu um erro ao enviar o formulário.');
                });
            });*/
    </script>
</body>
</html>